
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>DUBBO · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../springcloud/" />
    
    
    <link rel="prev" href="../zookeeper/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    INTRODUCTION
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../zookeeper/">
            
                <a href="../zookeeper/">
            
                    
                    ZOOKEEPER
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    DUBBO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../springcloud/">
            
                <a href="../springcloud/">
            
                    
                    SPRINGCLOUD
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >DUBBO</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="dubbo-sample">Dubbo Sample</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_s_this">What&#x2019;s this</a></li>
<li><a href="#__">&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;</a></li>
<li><a href="#___2">&#x672C;&#x5730;&#x8FD0;&#x884C;</a>
<ul class="sectlevel2">
<li><a href="#___3">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</a></li>
<li><a href="#___4">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</a></li>
</ul>
</li>
<li><a href="#___5">&#x5BB9;&#x5668;&#x5316;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</a>
<ul class="sectlevel2">
<li><a href="#___6">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</a></li>
<li><a href="#___7">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</a></li>
</ul>
</li>
<li><a href="#_k8s">K8S &#x4E0A;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</a>
<ul class="sectlevel2">
<li><a href="#___8">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</a></li>
<li><a href="#___9">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_what_s_this">What&#x2019;s this</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/dubble-example-arch-v2.png" alt="dubble example arch v2.png"></span></p>
</div>
<div class="paragraph">
<p>As above figure, the dubble sample contains 4 components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registry - Zookeeper</p>
</li>
<li>
<p>User Service Provider  - Dubbo Service Provider, which register the User Service to Zookeeper</p>
</li>
<li>
<p>User Service Consumer  - Dubbo Service Provider, which will lookup Dubbo Service from Registry and consume the service</p>
</li>
<li>
<p>Order Service - REST based service, which will invoke the User Service Consumer</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><strong>&#x7F16;&#x8BD1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mvn clean install
...
[INFO] Dubbo Parent ....................................... SUCCESS [  0.258 s]
[INFO] Dubbo User Service API ............................. SUCCESS [  1.055 s]
[INFO] Dubbo User Service Provider ........................ SUCCESS [  0.752 s]
[INFO] Dubbo User Service Consumer ........................ SUCCESS [  0.549 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
&#x7F16;&#x8BD1;&#x6210;&#x529F;&#x540E;&#x4F1A;&#x51FA;&#x73B0;&#x5982;&#x4E0A; <code>BUILD SUCCESS</code> &#x63D0;&#x793A;&#x3002;
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="__">&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#x53C2;&#x7167; <a href="https://cloudadc.github.io/zk/" target="_blank">&#x94FE;&#x63A5;</a> &#x5B89;&#x88C5;&#x4E09;&#x8282;&#x70B9;&#x96C6;&#x7FA4; ZooKeeper&#x3002;&#x5982;&#x4E0B;&#x4E3A;&#x4F46;&#x8282;&#x70B9;&#x5B89;&#x88C5;&#x793A;&#x610F;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="title"><strong>1. &#x5B89;&#x88C5; &amp; &#x542F;&#x52A8;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">tar -xvf apache-zookeeper-3.6.2-bin.tar.gz
<span class="hljs-built_in">cd</span> apache-zookeeper-3.6.2-bin/conf/
cp zoo_sample.cfg zoo.cfg
<span class="hljs-built_in">cd</span> ../bin/
./zkServer.sh start</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ./zkCli.sh
[zk: localhost:2181(CONNECTED) 0] version
ZooKeeper CLI version: 3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___2">&#x672C;&#x5730;&#x8FD0;&#x884C;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___3">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x542F;&#x52A8; 3 &#x4E2A; Provider &#x8282;&#x70B9;&#x4EE5;&#x4FDD;&#x8BC1;&#x9AD8;&#x53EF;&#x7528;&#xFF08;3 &#x4E2A; Provider &#x5728;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF09;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -Ddubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -Ddubbo.protocol.host=192.168.100.1 -Ddubbo.protocol.port=20880  -jar provider/target/dubbo-user-service-provider-0.0.1.jar
java -Ddubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -Ddubbo.protocol.host=192.168.100.1 -Ddubbo.protocol.port=20881  -jar provider/target/dubbo-user-service-provider-0.0.1.jar
java -Ddubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -Ddubbo.protocol.host=192.168.100.1 -Ddubbo.protocol.port=20882  -jar provider/target/dubbo-user-service-provider-0.0.1.jar</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Provider &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ telnet 192.168.100.1 20881

dubbo&gt;ls
PROVIDER:
io.cloudadc.dubbo.userservice.api.UserService:1.0.0

dubbo&gt;invoke io.cloudadc.dubbo.userservice.api.UserService.getUserAddress(100)
Use default service io.cloudadc.dubbo.userservice.api.UserService.
result: [{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>},{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>}]
elapsed: 1 ms.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___4">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x542F;&#x52A8;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -Ddubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -jar consumer/target/dubbo-user-service-consumer-0.0.1.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. &#x6D4B;&#x8BD5;</strong></p>
</div>
<div class="paragraph">
<p>Either test via
    <a href="http://localhost:8080/swagger-ui.html" class="bare" target="_blank">http://localhost:8080/swagger-ui.html</a></p>
</div>
<div class="paragraph">
<p>or execute from cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">$ curl -X GET <span class="hljs-string">&quot;http://localhost:8080/api/initOrder?uid=10101&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span>
{
  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;orderID&quot;</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;order&quot;</span>,
  <span class="hljs-string">&quot;userAddress&quot;</span>: [
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    },
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    }
  ]
}

<span class="hljs-comment">// To test load balancer</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {<span class="hljs-number">1.</span><span class="hljs-number">.20</span>} ; <span class="hljs-keyword">do</span> curl -X GET <span class="hljs-string">&quot;http://localhost:8080/api/initOrder?uid=10101&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span> ; echo; done</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x67E5;&#x770B; Consumer &#x548C; Provider &#x4E4B;&#x524D;&#x7684;&#x8FDE;&#x63A5;(Consumer &#x548C; &#x6240;&#x6709; Provider &#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x7EF4;&#x62A4;&#x8FDE;&#x63A5;&#x8868;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ netstat -anv | grep 3165
tcp46      0      0  *.8080                 *.*                    LISTEN      131072 131072   3165      0 0x0000 0x00000006
tcp4       0      0  192.168.100.1.53511    192.168.100.1.20882    ESTABLISHED 407215 146988   3165      0 0x0102 0x00000008
tcp4       0      0  192.168.100.1.53510    192.168.100.1.20880    ESTABLISHED 406349 146988   3165      0 0x0102 0x00000008
tcp4       0      0  192.168.100.1.53509    192.168.100.1.20881    ESTABLISHED 406781 146988   3165      0 0x0102 0x00000008
tcp4       0      0  10.1.10.1.53508        10.1.10.6.2181         ESTABLISHED 131072 131768   3165      0 0x0102 0x00000000</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___5">&#x5BB9;&#x5668;&#x5316;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___6">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6784;&#x5EFA;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x5BB9;&#x5668;&#x955C;&#x50CF;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-built_in">cd</span> provider/
docker build -t dubbo-user-service-provider .</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x542F;&#x52A8;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker run <span class="hljs-_">-e</span> DUBBO_IP_TO_REGISTRY=192.168.1.6 <span class="hljs-_">-e</span> DUBBO_PORT_TO_REGISTRY=20881 <span class="hljs-_">-e</span> dubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -p 192.168.1.6:20881:20880 dubbo-user-service-provider</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Provider &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ telnet 192.168.1.6 20881

dubbo&gt;ls
PROVIDER:
io.cloudadc.dubbo.userservice.api.UserService:1.0.0

dubbo&gt;invoke io.cloudadc.dubbo.userservice.api.UserService.getUserAddress(100)
Use default service io.cloudadc.dubbo.userservice.api.UserService.
result: [{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>},{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>}]
elapsed: 0 ms.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. Push image to a docker registry</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker tag dubbo-user-service-provider:latest cloudadc/dubbo-user-service-provider:0.0.1
docker push cloudadc/dubbo-user-service-provider:0.0.1</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___7">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x542F;&#x52A8;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -Ddubbo.registry.address=zookeeper://10.1.10.6:2181,10.1.10.7:2181,10.1.10.8:2181 -jar consumer/target/dubbo-user-service-consumer-0.0.1.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. &#x6D4B;&#x8BD5;</strong></p>
</div>
<div class="paragraph">
<p>Either test via
    <a href="http://localhost:8080/swagger-ui.html" class="bare" target="_blank">http://localhost:8080/swagger-ui.html</a></p>
</div>
<div class="paragraph">
<p>or execute from cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">$ curl -X GET <span class="hljs-string">&quot;http://localhost:8080/api/initOrder?uid=10101&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span>
{
  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;orderID&quot;</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;order&quot;</span>,
  <span class="hljs-string">&quot;userAddress&quot;</span>: [
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    },
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x67E5;&#x770B; Consumer &#x548C; Provider &#x4E4B;&#x524D;&#x7684;&#x8FDE;&#x63A5;(Consumer &#x548C; docker &#x8FD0;&#x884C;&#x7684;&#x5BBF;&#x4E3B;&#x673A;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ netstat -anv | grep 3057
tcp46      0      0  *.8080                 *.*                    LISTEN      131072 131072   3057      0 0x0000 0x00000006
tcp4       0      0  192.168.1.6.53248      192.168.1.6.20881      ESTABLISHED 403745 146988   3057      0 0x0102 0x00000008
tcp4       0      0  10.1.10.1.53247        10.1.10.7.2181         ESTABLISHED 131072 131768   3057      0 0x0102 0x00000000</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_k8s">K8S &#x4E0A;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___8">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;</h3>
<div class="ulist">
<ul>
<li>
<p>&#x4E0B;&#x8F7D;: <a href="provider/dubbo-user-service-provider.yaml">dubbo-user-service-provider.yaml</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><strong>1. &#x90E8;&#x7F72;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">kubectl apply <span class="hljs-_">-f</span> dubbo-user-service-provider.yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Dubbo Provider VIP &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ telnet 192.168.7.56 20880
Trying 192.168.7.56...
Connected to 192.168.7.56.
Escape character is <span class="hljs-string">&apos;^]&apos;</span>.

dubbo&gt;ls
PROVIDER:
io.cloudadc.dubbo.userservice.api.UserService:1.0.0

dubbo&gt;invoke io.cloudadc.dubbo.userservice.api.UserService.getUserAddress(100)
Use default service io.cloudadc.dubbo.userservice.api.UserService.
result: [{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>},{<span class="hljs-string">&quot;id&quot;</span>:100,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;18611908049&quot;</span>,<span class="hljs-string">&quot;userAddress&quot;</span>:<span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>}]
elapsed: 2 ms.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___9">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x542F;&#x52A8;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -Ddubbo.registry.address=zookeeper://192.168.7.60:2181 -jar consumer/target/dubbo-user-service-consumer-0.0.1.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. &#x6D4B;&#x8BD5;</strong></p>
</div>
<div class="paragraph">
<p>Either test via
    <a href="http://localhost:8080/swagger-ui.html" class="bare" target="_blank">http://localhost:8080/swagger-ui.html</a></p>
</div>
<div class="paragraph">
<p>or execute from cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">$ curl -X GET <span class="hljs-string">&quot;http://localhost:8080/api/initOrder?uid=10101&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span>
{
  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;orderID&quot;</span>,
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;order&quot;</span>,
  <span class="hljs-string">&quot;userAddress&quot;</span>: [
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Chaoyang, Building #17&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    },
    {
      <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">10101</span>,
      <span class="hljs-string">&quot;userAddress&quot;</span>: <span class="hljs-string">&quot;Beijing, Xicheng, Building #09&quot;</span>,
      <span class="hljs-string">&quot;phone&quot;</span>: <span class="hljs-string">&quot;18611908049&quot;</span>
    }
  ]
}

<span class="hljs-comment">// test loadbalancer</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {<span class="hljs-number">1.</span><span class="hljs-number">.20</span>} ; <span class="hljs-keyword">do</span> curl -X GET <span class="hljs-string">&quot;http://localhost:8080/api/initOrder?uid=10101&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span> ; echo; done</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x67E5;&#x770B; Consumer &#x548C; Provider &#x4E4B;&#x524D;&#x7684;&#x8FDE;&#x63A5;(Consumer &#x548C; F5 VIP &#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ netstat -anv | grep 2448
tcp46      0      0  *.8080                 *.*                    LISTEN      131072 131072   2448      0 0x0000 0x00000006
tcp4       0      0  10.10.0.25.52654       192.168.7.56.20880     ESTABLISHED 131072 131100   2448      0 0x0102 0x00000008
tcp4       0      0  10.10.0.25.52653       192.168.7.60.2181      ESTABLISHED 131072 131100   2448      0 0x0102 0x00000000</code></pre>
</div>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../zookeeper/" class="navigation navigation-prev " aria-label="Previous page: ZOOKEEPER">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../springcloud/" class="navigation navigation-next " aria-label="Next page: SPRINGCLOUD">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"DUBBO","level":"1.3","depth":1,"next":{"title":"SPRINGCLOUD","level":"1.4","depth":1,"path":"springcloud/README.adoc","ref":"springcloud/README.adoc","articles":[]},"previous":{"title":"ZOOKEEPER","level":"1.2","depth":1,"path":"zookeeper/README.adoc","ref":"zookeeper/README.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"copyrightYear":"2020","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","donate","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"http://ksoong.org/docs/content/images/alipay.png","alipayText":"支付宝捐赠","button":"赞赏","title":"","wechat":"http://ksoong.org/docs/content/images/wechat.png","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/docs/blob/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"website.css"}},"file":{"path":"dubbo/README.adoc","mtime":"2020-12-27T09:58:34.184Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2020-12-27T10:18:19.933Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

